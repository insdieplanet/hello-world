machine:
  timezone:
    Asia/Seoul
  node:
    version: 0.10.22

general:
  artifacts:
    - "coverage" # relative to the build directory
    - "app.js"
dependencies:
  override:
    - npm install
    - npm install -g swagger istanbul

test:
  override:
    - istanbul cover node_modules/.bin/_mocha test/api/controllers/hello_world.js
  post:
    - cp coverage $CIRCLE_ARTIFACTS/coverage

    - mkdir -p $CIRCLE_ARTIFACTS/app
    - cp app.js $CIRCLE_ARTIFACTS/app/
    - cp api $CIRCLE_ARTIFACTS/app/api
    - cp config $CIRCLE_ARTIFACTS/app/config
    - cp package.json $CIRCLE_ARTIFACTS/app/
